<dom-module id="grid-columns-demos">
  <template>
    <style include="vaadin-component-demo-shared-styles">
      :host {
        display: block;
      }
    </style>

    <h3>Column Grouping</h3>
    <p>
      Columns can be grouped together with <code>&lt;vaadin-grid-column-group&gt;</code> elements.
      Grouped columns can have a common header and footer cells.
    </p>
    <p>
      <b>Note:</b> Remember to define explicit bounds for images in order to avoid glitches once an image has fully loaded.
    </p>
    <p>
      <b>NOTE: You must explicitly import the <code>vaadin-grid-column-group.html</code> in order to use <code>&lt;vaadin-grid-column-group&gt;</code>.</b>
    </p>
    <vaadin-demo-snippet id='grid-columns-demos-column-grouping'>
      <template preserve-content>
        <x-data-provider></x-data-provider>
        
        <vaadin-grid aria-label="Column Grouping Example" size="200">
          <vaadin-grid-column width="30px" flex-grow="0" id="column1"></vaadin-grid-column>
          <vaadin-grid-column width="60px" flex-grow="0" id="column2"></vaadin-grid-column>

          <vaadin-grid-column-group id="group1">
            <vaadin-grid-column width="calc(25% - 20px)" id="column3"></vaadin-grid-column>
            <vaadin-grid-column width="calc(25% - 20px)" id="column4"></vaadin-grid-column>
          </vaadin-grid-column-group>

          <vaadin-grid-column-group id="group2">
            <vaadin-grid-column width="calc(25% - 20px)" id="column5"></vaadin-grid-column>
            <vaadin-grid-column width="calc(25% - 20px)" id="column6"></vaadin-grid-column>
            <vaadin-grid-column width="200px" id="column7"></vaadin-grid-column>
          </vaadin-grid-column-group>
        </vaadin-grid>
        <script>
          window.addDemoReadyListener('#grid-columns-demos-column-grouping', function(document) {
            const grid = document.querySelector('vaadin-grid');

            const dataProvider = document.querySelector('x-data-provider');
            grid.dataProvider = dataProvider.dataProvider;


            ['index', 'thumbnail', 'First', 'Last', 'City', 'State', 'Street'].forEach(function(columnName, index) {
              const columnID = index + 1;
              const column = document.querySelector('#column' + columnID);

              column.headerRenderer = function(root, column, model) {
                root.innerHTML = '';

                if (columnID === 1) {
                  root.textContent = '#';
                } else if (columnID === 2) {
                  root.innerHTML = '<div aria-label="Picture"></div>';
                } else {
                  root.textContent = columnName;
                }
              };

              column.renderer = function(root, column, model) {
                root.innerHTML = '';

                const propName = columnName.toLowerCase();
                if (columnID === 1) {
                  root.textContent = model[propName];
                } else if (columnID === 2) {
                  root.innerHTML =
                    '<iron-image width="30" height="30" sizing="cover" alt="' +
                    model.item.name.first +
                    model.item.name.last +
                    '" src="' + model.item.picture[propName] + '"></iron-image>';
                } else if (columnID < 5) {
                  root.textContent = model.item.name[propName];
                } else {
                  root.textContent = model.item.location[propName];
                }
              };
            });

            const group1 = document.querySelector('#group1');
            const group2 = document.querySelector('#group2');
            group1.headerRenderer = function(root, column, model) {
              root.textContent = 'Name';
            };
            group2.headerRenderer = function(root, column, model) {
              root.textContent = 'Location';
            };

          });
        </script>
      </template>
    </vaadin-demo-snippet>


    <h3>Freezing Columns</h3>
    <p>
      Applying <code>frozen</code> on a column will make it frozen. It can be
      also be applied to a column group to freeze all of its child columns.
    </p>
    <p>
      <b>Note:</b> Columns are frozen in-place, freeze columns from left to right
      for a consistent outcome.
    </p>
    <vaadin-demo-snippet id='grid-columns-demos-freezing-columns'>
      <template preserve-content>
        <x-data-provider></x-data-provider>

        <vaadin-checkbox>Freeze First Two Columns</vaadin-checkbox>

        <vaadin-grid aria-label="Freezing Columns Example" size="200">
          <vaadin-grid-column width="60px" flex-grow="0" id="column1"></vaadin-grid-column>
          <vaadin-grid-column width="60px" flex-grow="0" id="column2"></vaadin-grid-column>
          <vaadin-grid-column width="33%" id="column3"></vaadin-grid-column>
          <vaadin-grid-column width="33%" id="column4"></vaadin-grid-column>
          <vaadin-grid-column width="33%" id="column5"></vaadin-grid-column>
        </vaadin-grid>
        <script>
          window.addDemoReadyListener('#grid-columns-demos-freezing-columns', function(document) {
            const grid = document.querySelector('vaadin-grid');
            const checkBox = document.querySelector('vaadin-checkbox');

            checkBox.addEventListener('checked-changed', function(event) {
              column1.frozen = column2.frozen = event.detail.value;
            });

            const column1 = document.querySelector('#column1');
            const column2 = document.querySelector('#column2');
            const column3 = document.querySelector('#column3');
            const column4 = document.querySelector('#column4');
            const column5 = document.querySelector('#column5');

            column1.headerRenderer = function(root, column, model) {
              root.textContent = '#';
            };

            column2.headerRenderer = function(root, column, model) {
              root.innerHTML = '<div aria-label="Picture"></div>';
            };

            column3.headerRenderer = function(root, column, model) {
              root.textContent = 'First Name';
            };

            column4.headerRenderer = function(root, column, model) {
              root.textContent = 'Last Name';
            };

            column5.headerRenderer = function(root, column, model) {
              root.textContent = 'Email';
            };

            column1.renderer = function(root, column, model) {
              root.textContent = model.index;
            };

            column2.renderer = function(root, column, model) {
              root.innerHTML =
                '<iron-image width="30" height="30" sizing="cover" alt="' +
                model.item.name.first +
                model.item.name.last +
                '" src="' + model.item.picture.thumbnail + '"></iron-image>';
            };

            column3.renderer = function(root, column, model) {
              root.textContent = model.item.name.first;
            };

            column4.renderer = function(root, column, model) {
              root.textContent = model.item.name.last;
            };

            column5.renderer = function(root, column, model) {
              root.textContent = model.item.email;
            };

            const dataProvider = document.querySelector('x-data-provider');
            grid.dataProvider = dataProvider.dataProvider;
          });
        </script>
      </template>
    </vaadin-demo-snippet>


    <h3>Hiding Columns</h3>
    <p>
      Applying <code>hidden</code> on a column or column group will hide it.
    </p>
    <vaadin-demo-snippet id='grid-columns-demos-hiding-columns'>
      <template preserve-content>
        <x-data-provider></x-data-provider>

        <vaadin-checkbox>Hide First Two Columns</vaadin-checkbox>

        <vaadin-grid aria-label="Hiding Columns Example" size="200">
          <vaadin-grid-column width="60px" flex-grow="0" id="column1"></vaadin-grid-column>
          <vaadin-grid-column width="60px" flex-grow="0" id="column2"></vaadin-grid-column>
          <vaadin-grid-column width="33%" id="column3"></vaadin-grid-column>
          <vaadin-grid-column width="33%" id="column4"></vaadin-grid-column>
          <vaadin-grid-column width="33%" id="column5"></vaadin-grid-column>
        </vaadin-grid>
        <script>
          window.addDemoReadyListener('#grid-columns-demos-hiding-columns', function(document) {
            const grid = document.querySelector('vaadin-grid');
            const checkBox = document.querySelector('vaadin-checkbox');

            checkBox.addEventListener('checked-changed', function(event) {
              column1.hidden = column2.hidden = event.detail.value;
            });

            const column1 = document.querySelector('#column1');
            const column2 = document.querySelector('#column2');
            const column3 = document.querySelector('#column3');
            const column4 = document.querySelector('#column4');
            const column5 = document.querySelector('#column5');

            column1.headerRenderer = function(root, column, model) {
              root.textContent = '#';
            };

            column2.headerRenderer = function(root, column, model) {
              root.innerHTML = '<div aria-label="Picture"></div>';
            };

            column3.headerRenderer = function(root, column, model) {
              root.textContent = 'First Name';
            };

            column4.headerRenderer = function(root, column, model) {
              root.textContent = 'Last Name';
            };

            column5.headerRenderer = function(root, column, model) {
              root.textContent = 'Email';
            };

            column1.renderer = function(root, column, model) {
              root.textContent = model.index;
            };

            column2.renderer = function(root, column, model) {
              root.innerHTML =
                '<iron-image width="30" height="30" sizing="cover" alt="' +
                model.item.name.first +
                model.item.name.last +
                '" src="' + model.item.picture.thumbnail + '"></iron-image>';
            };

            column3.renderer = function(root, column, model) {
              root.textContent = model.item.name.first;
            };

            column4.renderer = function(root, column, model) {
              root.textContent = model.item.name.last;
            };

            column5.renderer = function(root, column, model) {
              root.textContent = model.item.email;
            };

            const dataProvider = document.querySelector('x-data-provider');
            grid.dataProvider = dataProvider.dataProvider;
          });
        </script>
      </template>
    </vaadin-demo-snippet>


    <h3>Reordering and Resizing Columns</h3>
    <p>
      Applying <code>column-reordering-allowed</code> on the grid will make all
      columns reorderable.
    </p>
    <p>
      Applying <code>resizable</code> on a column will make it resizable.
    </p>
    <p>
      <b>Note: </b>When using column groups, columns can be reordered only within
      their parent group.
    </p>
    <vaadin-demo-snippet id='grid-columns-demos-reordering-and-resizing-columns'>
      <template preserve-content>
        <x-data-provider></x-data-provider>

        <vaadin-grid aria-label="Reordering and Resizing Columns Example" size="200" column-reordering-allowed>
          <vaadin-grid-column width="30px" flex-grow="0" id="column1" resizable></vaadin-grid-column>
          <vaadin-grid-column width="60px" flex-grow="0" id="column2" resizable></vaadin-grid-column>

          <vaadin-grid-column-group id="group1" resizable>
            <vaadin-grid-column width="calc(25% - 20px)" id="column3"></vaadin-grid-column>
            <vaadin-grid-column width="calc(25% - 20px)" id="column4"></vaadin-grid-column>
          </vaadin-grid-column-group>

          <vaadin-grid-column-group id="group2" resizable>
            <vaadin-grid-column width="calc(25% - 20px)" id="column5"></vaadin-grid-column>
            <vaadin-grid-column width="calc(25% - 20px)" id="column6"></vaadin-grid-column>
            <vaadin-grid-column width="200px" id="column7"></vaadin-grid-column>
          </vaadin-grid-column-group>
        </vaadin-grid>
        <script>
          window.addDemoReadyListener('#grid-columns-demos-reordering-and-resizing-columns', function(document) {
            const grid = document.querySelector('vaadin-grid');

            const dataProvider = document.querySelector('x-data-provider');
            grid.dataProvider = dataProvider.dataProvider;


            ['index', 'thumbnail', 'First', 'Last', 'City', 'State', 'Street'].forEach(function(columnName, index) {
              const columnID = index + 1;
              const column = document.querySelector('#column' + columnID);

              column.headerRenderer = function(root, column, model) {
                root.innerHTML = '';

                if (columnID === 1) {
                  root.textContent = '#';
                } else if (columnID === 2) {
                  root.innerHTML = '<div aria-label="Picture"></div>';
                } else {
                  root.textContent = columnName;
                }
              };

              column.renderer = function(root, column, model) {
                root.innerHTML = '';

                const propName = columnName.toLowerCase();
                if (columnID === 1) {
                  root.textContent = model[propName];
                } else if (columnID === 2) {
                  root.innerHTML =
                    '<iron-image width="30" height="30" sizing="cover" alt="' +
                    model.item.name.first +
                    model.item.name.last +
                    '" src="' + model.item.picture[propName] + '"></iron-image>';
                } else if (columnID < 5) {
                  root.textContent = model.item.name[propName];
                } else {
                  root.textContent = model.item.location[propName];
                }
              };
            });

            const group1 = document.querySelector('#group1');
            const group2 = document.querySelector('#group2');
            group1.headerRenderer = function(root, column, model) {
              root.textContent = 'Name';
            };
            group2.headerRenderer = function(root, column, model) {
              root.textContent = 'Location';
            };
          });
        </script>
      </template>
    </vaadin-demo-snippet>


    <h3>Dynamic Columns using dom-repeat</h3>
    <vaadin-demo-snippet id='grid-columns-demos-dynamic-columns-using-dom-repeat'>
      <template preserve-content>
        <x-dynamic-columns></x-dynamic-columns>
        <dom-module id="x-dynamic-columns">
          <template preserve-content>
            <x-data-provider data-provider="{{dataProvider}}"></x-data-provider>
            <vaadin-grid aria-label="Dynamic Columns Example" id="grid" data-provider="[[dataProvider]]" size="200">
              <template is="dom-repeat" items="[[columns]]" as="column">

                <vaadin-grid-column>
                  <template class="header">[[column]]</template>
                  <template>[[get(column, item)]]</template>
                </vaadin-grid-column>
              </template>

            </vaadin-grid>
          </template>
          <script>
            window.addDemoReadyListener('#grid-columns-demos-dynamic-columns-using-dom-repeat', function(document) {
              Polymer({
                is: 'x-dynamic-columns',

                properties: {
                  columns: Array
                },

                ready: function() {
                  this.columns = ['name.first', 'name.last', 'email'];
                }
              });
            });
          </script>
        </dom-module>
      </template>
    </vaadin-demo-snippet>

  </template>
  <script>
    class GridColumnsDemos extends DemoReadyEventEmitter(GridDemo(Polymer.Element)) {
      static get is() {
        return 'grid-columns-demos';
      }
    }
    customElements.define(GridColumnsDemos.is, GridColumnsDemos);
  </script>
</dom-module>
