<dom-module id="grid-styling-demos">
  <template>
    <style include="vaadin-component-demo-shared-styles">
      :host {
        display: block;
      }
    </style>

    <p>Read more about writing custom CSS for themable elements from the 
      <a href="https://github.com/vaadin/vaadin-themable-mixin/wiki">
        styling and theming documentation
      </a>.
    </p>

    <h3>Generating Class Names for Grid Cells</h3>

    <vaadin-demo-snippet id='grid-styling-demos-cell-class-generator'>
      <template preserve-content>

        <vaadin-grid aria-label="Styling Grid With Cell Class Generator Example" id="grid" size="200">
          <vaadin-grid-column path="name.first" header="First name"></vaadin-grid-column>
          <vaadin-grid-column path="name.last" header="Last name"></vaadin-grid-column>
          <vaadin-grid-column path="email"></vaadin-grid-column>
        </vaadin-grid>

        <script>
          window.addDemoReadyListener('#grid-styling-demos-cell-class-generator', function(document) {
            const grid = document.querySelector('vaadin-grid');
            grid.items = Vaadin.GridDemo.users;

            grid.cellClassNameGenerator = function(rowData, column) {
              let classes = rowData.item.gender;
              if (column.path === 'email') {
                classes += ' email';
              } else if (column.path === 'name.first' && rowData.item.name.title === 'mrs') {
                classes += ' mrs';
              }
              return classes;
            };
          });
        </script>

        <!-- Place in index.html or in a separate HTML import -->
        <dom-module id="my-grid-styles" theme-for="vaadin-grid">
          <template>
              <style>
                /* Background needs a stronger selector to not be overridden */
                [part~="cell"].female {
                  background: var(--lumo-primary-color-10pct);
                }

                [part~="cell"].male {
                  background: var(--lumo-contrast-5pct);
                }

                .email {
                  font-style: italic;
                }

                .mrs {
                  font-weight: bold;
                }
              </style>
          </template>
        </dom-module>
      </template>
    </vaadin-demo-snippet>

    <h3>Updating Styles After Changes in the Data</h3>

    <vaadin-demo-snippet id='grid-styling-demos-regenerate-classes'>
      <template preserve-content>

        <vaadin-button style="margin-bottom: 20px" id="change-title-btn">Change Title</vaadin-button>

        <vaadin-grid aria-label="Styling Grid With Cell Class Generator Example" id="grid" size="200">
          <vaadin-grid-column path="name.first" header="First name"></vaadin-grid-column>
          <vaadin-grid-column path="name.last" header="Last name"></vaadin-grid-column>
          <vaadin-grid-column path="email"></vaadin-grid-column>
        </vaadin-grid>

        <script>
          window.addDemoReadyListener('#grid-styling-demos-regenerate-classes', function(document) {
            const grid = document.querySelector('vaadin-grid');
            grid.items = Vaadin.GridDemo.users;

            const changeTitleBtn = document.querySelector('#change-title-btn');
            changeTitleBtn.addEventListener('click', function() {
              grid.items[0].name.title = grid.items[0].name.title === 'ms' ? 'mrs' : 'ms';

              // Classes are re-generated also by clearCache() and render(),
              // but this function is lighter as it doesn't do anything extra.
              grid.generateClassNames();
            });

            grid.cellClassNameGenerator = function(rowData, column) {
              let classes = rowData.item.gender;
              if (column.path === 'email') {
                classes += ' email';
              } else if (column.path === 'name.first' && rowData.item.name.title === 'mrs') {
                classes += ' mrs';
              }
              return classes;
            };
          });
        </script>
      </template>
    </vaadin-demo-snippet>

  </template>
  <script>
    class GridStylingDemos extends DemoReadyEventEmitter(GridDemo(Polymer.Element)) {
      static get is() {
        return 'grid-styling-demos';
      }
    }
    customElements.define(GridStylingDemos.is, GridStylingDemos);
  </script>
</dom-module>
